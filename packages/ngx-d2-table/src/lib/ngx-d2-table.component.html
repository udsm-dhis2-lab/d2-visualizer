<div class="table-item-container mat-typography">
    <h5
      style="margin-top: 80px"
      class="text-center"
      *ngIf="tablePayload?.rows?.length === 0"
    >
      No data to display
    </h5>

    <div style="padding: 3px">
      <h4 *ngIf="tablePayload?.rows?.length !== 0" class="text-center" style="margin-bottom: 0px">{{tablePayload?.title}}</h4>
      <table
        class="table table-bordered table-responsive table-condensed custom-table"
        #table
        [id]="tableConfiguration?.id"
        *ngIf="tablePayload?.rows?.length !== 0"
      >
        <thead>
          <!--title-->
          <tr class="table-title">
            <th [attr.colspan]="tablePayload?.rows[0]?.items?.length">
              <div style="font-size: 13px" class="text-center text-muted">
                {{ tablePayload?.subtitle }}
              </div>
            </th>
          </tr>
          <!--headers-->
          <tr
            *ngFor="let header of tablePayload?.headers; let j = index"
            class="header-column"
          >
            <th *ngIf="tablePayload.hasParentOu"></th>
            <th
              *ngFor="let table_column of tablePayload?.columns; let i = index"
              style="text-align: center"
            >
              <span
                *ngIf="
                  i === tablePayload?.columns?.length - 1 &&
                  j === tablePayload?.headers?.length - 1 &&
                  tablePayload?.titlesAvailable
                "
                >{{ tablePayload?.titles?.rows[i] }} /
                {{ tablePayload?.titles?.column[j] }}</span
              >
              <span *ngIf="i !== tablePayload?.columns?.length - 1">{{
                tablePayload?.titles?.rows[i]
              }}</span>
              <span *ngIf="j !== tablePayload?.headers?.length - 1">{{
                tablePayload?.titles?.column[j]
              }}</span>
            </th>
            <th
              *ngFor="let header_column of header?.items; let i = index"
              [colSpan]="header_column?.span"
              style="text-align: center"
              (click)="
                sortData(
                  tablePayload,
                  i + tablePayload?.columns?.length,
                  j + 1 === tablePayload?.headers?.length
                )
              "
            >
              {{ header_column?.name }}
              <span
                *ngIf="
                  j + 1 === tablePayload?.headers?.length &&
                  current_sorting[i + tablePayload?.columns?.length] &&
                  sort_direction[i + tablePayload?.columns?.length] === 'asc'
                "
                class="glyphicon glyphicon-triangle-top pull-right"
              ></span>
              <span
                *ngIf="
                  j + 1 === tablePayload?.headers?.length &&
                  current_sorting[i + tablePayload?.columns?.length] &&
                  sort_direction[i + tablePayload?.columns?.length] === 'desc'
                "
                class="glyphicon glyphicon-triangle-bottom pull-right"
              ></span>
            </th>
          </tr>
        </thead>
        <tbody id="myPivotTable">
          <tr
            *ngFor="let row of tablePayload?.rows"
            [ngClass]="{ 'sub-total': row?.sub_total }"
          >
            <td
              *ngFor="let header_column of row?.items; let i = index"
              [ngClass]="{ 'header-column': header_column?.name !== '' }"
              style="text-align: center; vertical-align: middle"
              [attr.rowspan]="header_column?.row_span"
              [style.background]="
                header_column && header_column.isScorecardColorShown
                  ? header_column?.scorecardColor ? header_column?.scorecardColor : '#ffffff'
                  : header_column?.color
              "
            >
              {{ header_column?.val }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
</div>
